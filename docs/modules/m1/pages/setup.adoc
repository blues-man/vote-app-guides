# Red Hat Summit 2023: Vote App Lab Overview - Setup

In this section, we'll take a look at the setup of this OpenShift cluster we're using for today's lab. 

## Red Hat Developer Tools

Before we begin, we can take a look at some of the inner and outer loop developer flow tools that Red Hat provides.

.Red Hat Developer Flow
image::developer-flow.png[Developer Flow]

Red Hat Developer Tools provides a set of tools that help developers to build, test, deploy, and run applications. These tools are integrated and work together to provide a seamless developer experience. The tools we'll be using in this lab are:

### Inner Loop: OpenShift Dev Spaces

link:https://developers.redhat.com/products/openshift-dev-spaces/overview[*OpenShift Dev Spaces*] is a cloud and container-native development environment that provides a fast, secure, and zero-configuration development environment for Kubernetes and OpenShift. It allows developers to quickly bootstrap their development environment and start coding.

.OpenShift Dev Spaces Dashboard
image::devspaces-interface.png[OpenShift Dev Spaces]

### Outer Loop: OpenShift Pipelines

link:https://catalog.redhat.com/software/container-stacks/detail/5ec54a4628834587a6b85ca5[*OpenShift Pipelines*] is a cloud-native, continuous integration and delivery (CI/CD) solution for building pipelines using Tekton. Tekton is a flexible, Kubernetes-native, open-source CI/CD framework that enables automating deployments across multiple platforms (Kubernetes, serverless, VMs, etc) by abstracting away the underlying implementation details.

.Vote App Pipeline
image::pipeline-details.png[OpenShift Pipelines]

### Outer Loop: OpenShift GitOps

### Operator: OpenShift Pipelines 
We'll be using link:https://docs.openshift.com/container-platform/4.12/cicd/pipelines/understanding-openshift-pipelines.html[*OpenShift Pipelines*] to pull our code from Gitea, build it, and update the Gitea repository with the new image tag. Follow these instructions in order to install OpenShift Pipelines on OpenShift via the OperatorHub:

.Argo CD Application
image::argocd-app-details-2.png[OpenShift GitOps]

NOTE: Everything has already been pre-installed on your cluster, so there's no need to do anything here. This is just for reference.

## OpenShift Operators

To run this lab, we're using an OpenShift 4.12 cluster. This cluster has been pre-configured with the following OpenShift Operators:

### Operator: OpenShift Pipelines 
We'll be using link:https://console-openshift-console.%SUBDOMAIN%[*OpenShift Pipelines*] to pull our code from Gitea, build it, and update the Gitea repository with the new image tag.

### Operator: OpenShift GitOps 
We'll be using link:https://docs.openshift.com/container-platform/4.12/cicd/gitops/understanding-openshift-gitops.html[*OpenShift GitOps*] to deploy our application to the cluster, and to manage the application lifecycle. Our two projects, `vote-app-dev-%USERID%` and `vote-app-prod-%USERID%`, will be managed by ArgoCD, and we'll be able to demonstrate high-availability using GitOps. Follow these instructions in order to install OpenShift GitOps on OpenShift via the OperatorHub.

- From the left-side menu under *Administrator* perspective, go to
*Operators*-> *OperatorHub*. In the search box, search for _OpenShift GitOps_,
then click to *OpenShift GitOps*:

.OpenShift GitOps Operator
image::openshift-gitops-operator.png[OpenShift GitOps Operator]

- From the description view, click _Install_ to review all installation
settings.

.OpenShift GitOps operator
image::openshift-gitops-operator-install.png[OpenShift GitOps operator]

- After few seconds, the installation should be completed with success and
you can verify it looking at _Status_ column, check if the status is
_Succeeded_.

### Operator: OpenShift Dev Spaces
We'll use link:https://developers.redhat.com/products/openshift-dev-spaces/overview[*OpenShift Dev Spaces*] to develop our application locally, commit our changes using Git, and then deploy our changes to the cluster. Follow these instructions in order to install OpenShift Dev Spaces on OpenShift via the OperatorHub:

### Operator: OpenShift Web Terminal
Finally, the *Web Terminal* is a web-based terminal for OpenShift. It allows users to access a terminal in a pod from the OpenShift Web Console. Follow these instructions in order to install OpenShift GitOps on OpenShift via the OperatorHub.

// .OpenShift Web Terminal
// image::web-terminal-interface.png[Web Terminal Interface]

## Lab Checks

### OpenShift Operators

This OpenShift cluster has been pre-configured with the operators listed above, cluster-wide, and from the *admin* account, we can confirm this. Firstly, navigate to the *Administrator* perspective, and click on *Operators* from within the left-hand menu. Now, click on *Installed Operators* from the sub-menu.

image::operators-button.png[Operators Button]

Here, we can view the operators that have been installed to our cluster, as well as various details about their installation, etc.

image::installed-operators.png[Installed Operators]

By clicking on one of these operators, we can view the CustomResourceDefinitions they have defined, documentation, and much more.

image::operator-details.png[Operator Details]

While we won't be using the *admin* account during this lab, it's still important to understand these operators as they help extend the functionality of OpenShift and allow us to perform this lab.

### Argo CD

Let's take a look at link:https://argocd-server-argocd-%USERID%.%SUBDOMAIN%[*Argo CD*], a declarative, GitOps continuous delivery tool for Kubernetes provided in the OpenShift GitOps Operator. While you can access Argo CD from the back at the *Lab Guides*, you can also visit Argo CD from your OpenShift cluster. Within the *Developer* perspective, navigate to the `argocd-%USERID%` project, and visit the *Topology* page.

image::argocd-button.png[Argo CD Route Button]

link:https://argocd-server-argocd-%USERID%.%SUBDOMAIN%[*Argo CD*,role='params-link',window='_blank'] is a declarative, GitOps continuous delivery tool for Kubernetes provided in the OpenShift GitOps Operator. From your OpenShift cluster, you can access the ArgoCD dashboard.

image::argocd-login.png[Argo CD Login]

As a reference, here are your credentials:

- Username: `%USERID%`
- Password: `openshift`

You'll need to authorize the Argo CD application to access your OpenShift cluster. Click on the *Allow selected permissions* button to authorize Argo CD to access your OpenShift cluster. Finally, you'll be at the Argo CD dashboard.

image::argocd.png[Argo CD]

### Vote App Repository

You'll also have access to a link:http://gitea.%SUBDOMAIN%[*Gitea*,,role='params-link',window='_blank'] repository that contains the Vote App source code. This repository can also be located back at the *Lab Guides*, and you'll be able to access this repository using following credentials:

- Username: `%USERID%`
- Password: `openshift`

image::gitea.png[Gitea]

Once logged in, you can access the following Vote App source repositories:

- link:https://gitea.%SUBDOMAIN%/%USERID%/pipelines-vote-ui[Vote App UI Frontend,role='params-link',window='_blank']
- link:https://gitea.%SUBDOMAIN%/%USERID%/pipelines-vote-api[Vote App API Backend,role='params-link',window='_blank']

We also have a repository that contains the ArgoCD application manifests for the Vote App.

- link:https://gitea.%SUBDOMAIN%/%USERID%/vote-app-gitops[Vote App GitOps,,role='params-link',window='_blank']

## Lab overview

We also have a repository that contains the Argo CD application manifests for the Vote App.

- link:http://gitea.%SUBDOMAIN%/%USERID%/vote-app-gitops[Vote App GitOps]

## Next steps

Your cluster is already configured with the appropriate OpenShift project, configured secrets and service accounts, and necessary Git repositories. From here, we can wrap up the introduction and begin our lab!